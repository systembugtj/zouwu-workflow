#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸŒŒ è¿è¡Œ pre-commit æ£€æŸ¥..."

# è¿è¡Œ lint æ£€æŸ¥
echo "ğŸ“œ è¿è¡Œ ESLint..."
npm run lint || exit 1

# è¿è¡Œæ ¼å¼æ£€æŸ¥
echo "âœ¨ æ£€æŸ¥ä»£ç æ ¼å¼..."
npm run format:check || exit 1

# è¿è¡Œè¡¨è¾¾å¼è§£æå™¨åŒ…çš„æµ‹è¯•ï¼ˆæœ‰ Jest æµ‹è¯•ï¼‰
echo "ğŸ§ª è¿è¡Œè¡¨è¾¾å¼è§£æå™¨æµ‹è¯•..."
cd packages/@systembug/zouwu-expression-parser && npm test || exit 1
cd ../../..

echo "âœ… pre-commit æ£€æŸ¥é€šè¿‡ï¼"
